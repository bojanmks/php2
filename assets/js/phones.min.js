let page=1,phonesPerPage=6;$(document).ready(function(){function e(a=!1){a&&(page=1);let n=[];for(let e of $(".chbBrand:checked"))n.push(e.value);let o=[];for(let e of $(".chbOS:checked"))o.push(e.value);let l=$("#tbMaxPrice").val(),c=$("#tbSearch").val(),s=$("#ddlSortOrder").val();ajaxCallback("models/phones/get-phones.php","GET",function(a){!function(a){let n=a.phones,o="";if(n.length>0)for(let e of n)o+=`<div class="mx-auto mx-sm-0 col-9 col-sm-6 col-lg-4 text-center mb-3">\n                <div class="phoneDiv position-relative rounded">\n                <div class="phoneImage">\n                    <img src="assets/img/phones/${e.image_small}" alt="${e.name}" class="img-fluid"/>\n                </div>\n                <label class="phoneName font-medium">${e.name}</label>\n                <br/>\n                <label class="phonePrice font-medium fw-bold">${e.price}&euro;</label>\n                <div class="phoneOverlay position-absolute cover align-items-center justify-content-center">\n                    <div class="phoneButtons d-flex flex-column">\n                        <a href="index.php?p=details&id=${e.id}" class="btn-white py-1 px-2 rounded mb-2 d-block font-small">Details</a>\n                        <a href="#" data-id="${e.id}" class="btn-white btnAddToCart py-1 px-2 rounded d-block font-small"><i class="fas fa-cart-plus"></i></a>\n                    </div>\n                </div>\n                </div>\n            </div>`;else o="<div class='col-12'><p class='text-center text-md-start font-medium'>Oops, seems like there are no phones that match your search criteria.</p></div>";$("#phones .row").html(o);let l=a.numberOfPhones,c="";if(l>0){c+="<a href='#' id='btnPrev' class=\"font-small btn-primary px-3 py-1 rounded-start\">&lt;</a>";for(let e=0;e<l/phonesPerPage;e++)c+=`<a href='#' data-page='${e+1}' class="font-small btn-primary px-2 py-1 btnPage">${e+1}</a>`;c+="<a href='#' id='btnNext' class=\"font-small btn-primary px-3 py-1 rounded-end\">&gt;</a>"}$("#pagination").html(c),function(){$("#btnPrev").click(function(t){t.preventDefault(),page>1&&(page--,e())}),$("#btnNext").click(function(t){t.preventDefault(),page<$(".btnPage").length&&(page++,e())}),$(".btnPage").click(function(t){t.preventDefault(),page=$(this).data("page"),e()});for(let e of $(".btnPage"))if($(e).data("page")==page){$(e).addClass("activePage");break}}(),$(".btnAddToCart").click(function(e){e.preventDefault();let a=$(this).data("id");t(a)})}(a)},{brand:n,os:o,maxPrice:l,search:c,order:s,page:page,phonesPerPage:phonesPerPage})}function t(e,t=1){let l;ajaxCallback("models/users/get-current-user.php","GET",function(c){(l=c)?ajaxCallback("models/cart/add-to-cart.php","POST",function(e){!function(e){if($(".cartSuccessModal").length>0)$(".cartSuccessModalContent").html(e),clearTimeout(n),n=o(a);else{let t=`<div class="cartSuccessModal w-100 h-100 position-fixed fixed-top pt-5">\n            <div class="row mt-5">\n                <div class="cartSuccessModalContent mx-auto col-8 col-md-3 alert alert-info text-center">${e}</div>\n            </div>\n        </div>`;$("body").append(t),$(".cartSuccessModalContent").fadeIn("fast"),n=o(a)}}(e),printCartQuantity()},{userId:l.id,phoneId:e,quantity:t}):location.href="index.php?p=login"},{message:"You need to be logged in in order to add items to your cart."})}$(".chbBrand, .chbOS, #ddlSortOrder").change(function(){e(!0)}),$("#tbSearch, #tbMaxPrice").on("input",function(){e(!0)}),e(),$("#btnAddToCart").click(function(e){e.preventDefault(),t($(this).data("id"),parseInt($("#tbAddToCart").val()))});const a=3;let n;function o(e){return setTimeout(l,1e3*e)}function l(){$(".cartSuccessModalContent").fadeOut("fast",function(){$(".cartSuccessModal").remove()})}});